(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var bend, divide, each_grow, length2, minus, multiply, plus, _ref;

_ref = require("./quaternion"), plus = _ref.plus, minus = _ref.minus, multiply = _ref.multiply, divide = _ref.divide, length2 = _ref.length2;

each_grow = function(origin, destination, path) {
  var course, end, factor, polyline, start, whole_course;
  start = path[0];
  end = path[path.length - 1];
  course = minus(end, start);
  whole_course = minus(destination, origin);
  factor = divide(whole_course, course);
  polyline = [];
  path.slice(1, -1).forEach(function(a) {
    var b, c;
    b = minus(a, start);
    c = multiply(b, factor);
    return polyline.push(plus(origin, c));
  });
  polyline.push(destination);
  return polyline;
};

bend = function(list, template) {
  var base_point, result;
  base_point = list[0];
  result = [base_point];
  list.slice(1).forEach(function(guide_point) {
    var segment, _ref1;
    if ((1 < (_ref1 = length2(guide_point, base_point)) && _ref1 < 800000)) {
      segment = each_grow(base_point, guide_point, template);
      result.push.apply(result, segment);
      return base_point = guide_point;
    }
  });
  return result;
};

exports.bend = bend;

},{"./quaternion":3}],2:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var camera, canvas, delay, geometry, height, line, material, paint_point, polyline, ratio, render, renderer, scene, test, width;

console.log("loaded");

width = 1300;

height = 700;

scene = new THREE.Scene;

ratio = width / height;

camera = new THREE.PerspectiveCamera(45, ratio, 0.1, 800);

camera.position.set(0, 0, 400);

camera.lookAt(new THREE.Vector3(0, 0, 0));

renderer = new THREE.WebGLRenderer;

renderer.setSize(width, height);

canvas = renderer.domElement;

document.body.appendChild(canvas);

canvas.setAttribute("width", "" + width + "px");

canvas.setAttribute("height", "" + height + "px");

geometry = new THREE.CubeGeometry;

paint_point = function(a) {
  return geometry.vertices.push(new THREE.Vector3(a.x, a.y, a.z));
};

test = require("./test");

polyline = test.test_line();

polyline.forEach(paint_point);

material = new THREE.LineBasicMaterial({
  color: 0xccccff,
  linewidth: 1
});

line = new THREE.Line(geometry, material);

scene.add(line);

delay = function(t, f) {
  return setTimeout(f, t);
};

(render = function() {
  delay(100, function() {
    return requestAnimationFrame(render);
  });
  renderer.render(scene, camera);
  line.rotation.y += 0.02;
  return line.rotation.z += 0.003;
})();

},{"./test":4}],3:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var conjugate, divide, length2, minus, multiply, norm, plus, square, sum4Square;

plus = function(a, b) {
  return {
    x: a.x + b.x,
    y: a.y + b.y,
    z: a.z + b.z,
    w: a.w + b.w
  };
};

minus = function(a, b) {
  return {
    x: a.x - b.x,
    y: a.y - b.y,
    z: a.z - b.z,
    w: a.w - b.w
  };
};

multiply = function(a, b) {
  return {
    x: (a.x * b.x) - (a.y * b.y) - (a.z * b.z) - (a.w * b.w),
    y: (a.x * b.y) + (a.y * b.x) + (a.z * b.w) - (a.w * b.z),
    z: (a.x * b.z) + (a.z * b.x) + (a.w * b.y) - (a.y * b.w),
    w: (a.x * b.w) + (a.w * b.x) + (a.y * b.z) - (a.z * b.y)
  };
};

conjugate = function(a) {
  return {
    x: a.x,
    y: -a.y,
    z: -a.z,
    w: -a.w
  };
};

square = function(a) {
  return a * a;
};

sum4Square = function(a) {
  var s4;
  s4 = square;
  return (s4(a.x)) + (s4(a.y)) + (s4(a.z)) + (s4(a.w));
};

length2 = function(a) {
  return sum4Square(a);
};

norm = function(a) {
  return Math.pow(length2(a), 0.5);
};

divide = function(a, b) {
  var c, d, realPart;
  c = conjugate(b);
  d = multiply(a, c);
  realPart = sum4Square(b);
  if (realPart === 0) {
    return {
      x: 0,
      y: 0,
      z: 0,
      w: 0
    };
  } else {
    return {
      x: d.x / realPart,
      y: d.y / realPart,
      z: d.z / realPart,
      w: d.z / realPart
    };
  }
};

exports.plus = plus;

exports.minus = minus;

exports.multiply = multiply;

exports.divide = divide;

exports.norm = norm;

exports.length2 = length2;

},{}],4:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
var bend, data, fix, four, p1, p2, p3, p4, p5, three, _ref;

_ref = require("./three_quarter"), three = _ref.three, four = _ref.four;

bend = require("./bend").bend;

p1 = {
  x: -150,
  y: 0,
  z: 0
};

p2 = {
  x: -10,
  y: 0,
  z: 20
};

p3 = {
  x: 0,
  y: 120,
  z: 0
};

p4 = {
  x: 10,
  y: 0,
  z: -20
};

p5 = {
  x: 150,
  y: 0,
  z: 0
};

data = [p1, p2, p3, p4, p5].map(four);

fix = function(a) {
  return a.toFixed(1);
};

exports.test_line = function() {
  var result;
  result = data;
  [1, 2, 3, 4].forEach(function() {
    return result = bend(result, data);
  });
  return result;
};

},{"./bend":1,"./three_quarter":5}],5:[function(require,module,exports){
// Generated by CoffeeScript 1.7.1
exports.three = function(a) {
  return {
    x: a.x,
    y: a.y,
    z: a.z
  };
};

exports.four = function(a) {
  return {
    x: a.x,
    y: a.y,
    z: a.z,
    w: 6
  };
};

},{}]},{},[2])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvVXNlcnMvY2hlbi9yZXBvL3RocmVlLXF1YXJ0ZXIvbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2Jyb3dzZXItcGFjay9fcHJlbHVkZS5qcyIsIi9Vc2Vycy9jaGVuL3JlcG8vdGhyZWUtcXVhcnRlci9qcy9iZW5kLmpzIiwiL1VzZXJzL2NoZW4vcmVwby90aHJlZS1xdWFydGVyL2pzL21haW4uanMiLCIvVXNlcnMvY2hlbi9yZXBvL3RocmVlLXF1YXJ0ZXIvanMvcXVhdGVybmlvbi5qcyIsIi9Vc2Vycy9jaGVuL3JlcG8vdGhyZWUtcXVhcnRlci9qcy90ZXN0LmpzIiwiL1VzZXJzL2NoZW4vcmVwby90aHJlZS1xdWFydGVyL2pzL3RocmVlX3F1YXJ0ZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vIEdlbmVyYXRlZCBieSBDb2ZmZWVTY3JpcHQgMS43LjFcbnZhciBiZW5kLCBkaXZpZGUsIGVhY2hfZ3JvdywgbGVuZ3RoMiwgbWludXMsIG11bHRpcGx5LCBwbHVzLCBfcmVmO1xuXG5fcmVmID0gcmVxdWlyZShcIi4vcXVhdGVybmlvblwiKSwgcGx1cyA9IF9yZWYucGx1cywgbWludXMgPSBfcmVmLm1pbnVzLCBtdWx0aXBseSA9IF9yZWYubXVsdGlwbHksIGRpdmlkZSA9IF9yZWYuZGl2aWRlLCBsZW5ndGgyID0gX3JlZi5sZW5ndGgyO1xuXG5lYWNoX2dyb3cgPSBmdW5jdGlvbihvcmlnaW4sIGRlc3RpbmF0aW9uLCBwYXRoKSB7XG4gIHZhciBjb3Vyc2UsIGVuZCwgZmFjdG9yLCBwb2x5bGluZSwgc3RhcnQsIHdob2xlX2NvdXJzZTtcbiAgc3RhcnQgPSBwYXRoWzBdO1xuICBlbmQgPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gIGNvdXJzZSA9IG1pbnVzKGVuZCwgc3RhcnQpO1xuICB3aG9sZV9jb3Vyc2UgPSBtaW51cyhkZXN0aW5hdGlvbiwgb3JpZ2luKTtcbiAgZmFjdG9yID0gZGl2aWRlKHdob2xlX2NvdXJzZSwgY291cnNlKTtcbiAgcG9seWxpbmUgPSBbXTtcbiAgcGF0aC5zbGljZSgxLCAtMSkuZm9yRWFjaChmdW5jdGlvbihhKSB7XG4gICAgdmFyIGIsIGM7XG4gICAgYiA9IG1pbnVzKGEsIHN0YXJ0KTtcbiAgICBjID0gbXVsdGlwbHkoYiwgZmFjdG9yKTtcbiAgICByZXR1cm4gcG9seWxpbmUucHVzaChwbHVzKG9yaWdpbiwgYykpO1xuICB9KTtcbiAgcG9seWxpbmUucHVzaChkZXN0aW5hdGlvbik7XG4gIHJldHVybiBwb2x5bGluZTtcbn07XG5cbmJlbmQgPSBmdW5jdGlvbihsaXN0LCB0ZW1wbGF0ZSkge1xuICB2YXIgYmFzZV9wb2ludCwgcmVzdWx0O1xuICBiYXNlX3BvaW50ID0gbGlzdFswXTtcbiAgcmVzdWx0ID0gW2Jhc2VfcG9pbnRdO1xuICBsaXN0LnNsaWNlKDEpLmZvckVhY2goZnVuY3Rpb24oZ3VpZGVfcG9pbnQpIHtcbiAgICB2YXIgc2VnbWVudCwgX3JlZjE7XG4gICAgaWYgKCgxIDwgKF9yZWYxID0gbGVuZ3RoMihndWlkZV9wb2ludCwgYmFzZV9wb2ludCkpICYmIF9yZWYxIDwgODAwMDAwKSkge1xuICAgICAgc2VnbWVudCA9IGVhY2hfZ3JvdyhiYXNlX3BvaW50LCBndWlkZV9wb2ludCwgdGVtcGxhdGUpO1xuICAgICAgcmVzdWx0LnB1c2guYXBwbHkocmVzdWx0LCBzZWdtZW50KTtcbiAgICAgIHJldHVybiBiYXNlX3BvaW50ID0gZ3VpZGVfcG9pbnQ7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydHMuYmVuZCA9IGJlbmQ7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgY2FtZXJhLCBjYW52YXMsIGRlbGF5LCBnZW9tZXRyeSwgaGVpZ2h0LCBsaW5lLCBtYXRlcmlhbCwgcGFpbnRfcG9pbnQsIHBvbHlsaW5lLCByYXRpbywgcmVuZGVyLCByZW5kZXJlciwgc2NlbmUsIHRlc3QsIHdpZHRoO1xuXG5jb25zb2xlLmxvZyhcImxvYWRlZFwiKTtcblxud2lkdGggPSAxMzAwO1xuXG5oZWlnaHQgPSA3MDA7XG5cbnNjZW5lID0gbmV3IFRIUkVFLlNjZW5lO1xuXG5yYXRpbyA9IHdpZHRoIC8gaGVpZ2h0O1xuXG5jYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNDUsIHJhdGlvLCAwLjEsIDgwMCk7XG5cbmNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMCwgNDAwKTtcblxuY2FtZXJhLmxvb2tBdChuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKSk7XG5cbnJlbmRlcmVyID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyZXI7XG5cbnJlbmRlcmVyLnNldFNpemUod2lkdGgsIGhlaWdodCk7XG5cbmNhbnZhcyA9IHJlbmRlcmVyLmRvbUVsZW1lbnQ7XG5cbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKTtcblxuY2FudmFzLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFwiXCIgKyB3aWR0aCArIFwicHhcIik7XG5cbmNhbnZhcy5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgXCJcIiArIGhlaWdodCArIFwicHhcIik7XG5cbmdlb21ldHJ5ID0gbmV3IFRIUkVFLkN1YmVHZW9tZXRyeTtcblxucGFpbnRfcG9pbnQgPSBmdW5jdGlvbihhKSB7XG4gIHJldHVybiBnZW9tZXRyeS52ZXJ0aWNlcy5wdXNoKG5ldyBUSFJFRS5WZWN0b3IzKGEueCwgYS55LCBhLnopKTtcbn07XG5cbnRlc3QgPSByZXF1aXJlKFwiLi90ZXN0XCIpO1xuXG5wb2x5bGluZSA9IHRlc3QudGVzdF9saW5lKCk7XG5cbnBvbHlsaW5lLmZvckVhY2gocGFpbnRfcG9pbnQpO1xuXG5tYXRlcmlhbCA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7XG4gIGNvbG9yOiAweGNjY2NmZixcbiAgbGluZXdpZHRoOiAxXG59KTtcblxubGluZSA9IG5ldyBUSFJFRS5MaW5lKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cbnNjZW5lLmFkZChsaW5lKTtcblxuZGVsYXkgPSBmdW5jdGlvbih0LCBmKSB7XG4gIHJldHVybiBzZXRUaW1lb3V0KGYsIHQpO1xufTtcblxuKHJlbmRlciA9IGZ1bmN0aW9uKCkge1xuICBkZWxheSgxMDAsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVuZGVyKTtcbiAgfSk7XG4gIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbiAgbGluZS5yb3RhdGlvbi55ICs9IDAuMDI7XG4gIHJldHVybiBsaW5lLnJvdGF0aW9uLnogKz0gMC4wMDM7XG59KSgpO1xuIiwiLy8gR2VuZXJhdGVkIGJ5IENvZmZlZVNjcmlwdCAxLjcuMVxudmFyIGNvbmp1Z2F0ZSwgZGl2aWRlLCBsZW5ndGgyLCBtaW51cywgbXVsdGlwbHksIG5vcm0sIHBsdXMsIHNxdWFyZSwgc3VtNFNxdWFyZTtcblxucGx1cyA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIHtcbiAgICB4OiBhLnggKyBiLngsXG4gICAgeTogYS55ICsgYi55LFxuICAgIHo6IGEueiArIGIueixcbiAgICB3OiBhLncgKyBiLndcbiAgfTtcbn07XG5cbm1pbnVzID0gZnVuY3Rpb24oYSwgYikge1xuICByZXR1cm4ge1xuICAgIHg6IGEueCAtIGIueCxcbiAgICB5OiBhLnkgLSBiLnksXG4gICAgejogYS56IC0gYi56LFxuICAgIHc6IGEudyAtIGIud1xuICB9O1xufTtcblxubXVsdGlwbHkgPSBmdW5jdGlvbihhLCBiKSB7XG4gIHJldHVybiB7XG4gICAgeDogKGEueCAqIGIueCkgLSAoYS55ICogYi55KSAtIChhLnogKiBiLnopIC0gKGEudyAqIGIudyksXG4gICAgeTogKGEueCAqIGIueSkgKyAoYS55ICogYi54KSArIChhLnogKiBiLncpIC0gKGEudyAqIGIueiksXG4gICAgejogKGEueCAqIGIueikgKyAoYS56ICogYi54KSArIChhLncgKiBiLnkpIC0gKGEueSAqIGIudyksXG4gICAgdzogKGEueCAqIGIudykgKyAoYS53ICogYi54KSArIChhLnkgKiBiLnopIC0gKGEueiAqIGIueSlcbiAgfTtcbn07XG5cbmNvbmp1Z2F0ZSA9IGZ1bmN0aW9uKGEpIHtcbiAgcmV0dXJuIHtcbiAgICB4OiBhLngsXG4gICAgeTogLWEueSxcbiAgICB6OiAtYS56LFxuICAgIHc6IC1hLndcbiAgfTtcbn07XG5cbnNxdWFyZSA9IGZ1bmN0aW9uKGEpIHtcbiAgcmV0dXJuIGEgKiBhO1xufTtcblxuc3VtNFNxdWFyZSA9IGZ1bmN0aW9uKGEpIHtcbiAgdmFyIHM0O1xuICBzNCA9IHNxdWFyZTtcbiAgcmV0dXJuIChzNChhLngpKSArIChzNChhLnkpKSArIChzNChhLnopKSArIChzNChhLncpKTtcbn07XG5cbmxlbmd0aDIgPSBmdW5jdGlvbihhKSB7XG4gIHJldHVybiBzdW00U3F1YXJlKGEpO1xufTtcblxubm9ybSA9IGZ1bmN0aW9uKGEpIHtcbiAgcmV0dXJuIE1hdGgucG93KGxlbmd0aDIoYSksIDAuNSk7XG59O1xuXG5kaXZpZGUgPSBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBjLCBkLCByZWFsUGFydDtcbiAgYyA9IGNvbmp1Z2F0ZShiKTtcbiAgZCA9IG11bHRpcGx5KGEsIGMpO1xuICByZWFsUGFydCA9IHN1bTRTcXVhcmUoYik7XG4gIGlmIChyZWFsUGFydCA9PT0gMCkge1xuICAgIHJldHVybiB7XG4gICAgICB4OiAwLFxuICAgICAgeTogMCxcbiAgICAgIHo6IDAsXG4gICAgICB3OiAwXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgeDogZC54IC8gcmVhbFBhcnQsXG4gICAgICB5OiBkLnkgLyByZWFsUGFydCxcbiAgICAgIHo6IGQueiAvIHJlYWxQYXJ0LFxuICAgICAgdzogZC56IC8gcmVhbFBhcnRcbiAgICB9O1xuICB9XG59O1xuXG5leHBvcnRzLnBsdXMgPSBwbHVzO1xuXG5leHBvcnRzLm1pbnVzID0gbWludXM7XG5cbmV4cG9ydHMubXVsdGlwbHkgPSBtdWx0aXBseTtcblxuZXhwb3J0cy5kaXZpZGUgPSBkaXZpZGU7XG5cbmV4cG9ydHMubm9ybSA9IG5vcm07XG5cbmV4cG9ydHMubGVuZ3RoMiA9IGxlbmd0aDI7XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG52YXIgYmVuZCwgZGF0YSwgZml4LCBmb3VyLCBwMSwgcDIsIHAzLCBwNCwgcDUsIHRocmVlLCBfcmVmO1xuXG5fcmVmID0gcmVxdWlyZShcIi4vdGhyZWVfcXVhcnRlclwiKSwgdGhyZWUgPSBfcmVmLnRocmVlLCBmb3VyID0gX3JlZi5mb3VyO1xuXG5iZW5kID0gcmVxdWlyZShcIi4vYmVuZFwiKS5iZW5kO1xuXG5wMSA9IHtcbiAgeDogLTE1MCxcbiAgeTogMCxcbiAgejogMFxufTtcblxucDIgPSB7XG4gIHg6IC0xMCxcbiAgeTogMCxcbiAgejogMjBcbn07XG5cbnAzID0ge1xuICB4OiAwLFxuICB5OiAxMjAsXG4gIHo6IDBcbn07XG5cbnA0ID0ge1xuICB4OiAxMCxcbiAgeTogMCxcbiAgejogLTIwXG59O1xuXG5wNSA9IHtcbiAgeDogMTUwLFxuICB5OiAwLFxuICB6OiAwXG59O1xuXG5kYXRhID0gW3AxLCBwMiwgcDMsIHA0LCBwNV0ubWFwKGZvdXIpO1xuXG5maXggPSBmdW5jdGlvbihhKSB7XG4gIHJldHVybiBhLnRvRml4ZWQoMSk7XG59O1xuXG5leHBvcnRzLnRlc3RfbGluZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzdWx0O1xuICByZXN1bHQgPSBkYXRhO1xuICBbMSwgMiwgMywgNF0uZm9yRWFjaChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gcmVzdWx0ID0gYmVuZChyZXN1bHQsIGRhdGEpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG4iLCIvLyBHZW5lcmF0ZWQgYnkgQ29mZmVlU2NyaXB0IDEuNy4xXG5leHBvcnRzLnRocmVlID0gZnVuY3Rpb24oYSkge1xuICByZXR1cm4ge1xuICAgIHg6IGEueCxcbiAgICB5OiBhLnksXG4gICAgejogYS56XG4gIH07XG59O1xuXG5leHBvcnRzLmZvdXIgPSBmdW5jdGlvbihhKSB7XG4gIHJldHVybiB7XG4gICAgeDogYS54LFxuICAgIHk6IGEueSxcbiAgICB6OiBhLnosXG4gICAgdzogNlxuICB9O1xufTtcbiJdfQ==
